# Reshaping JSON with jq

[https://programminghistorian.org/en/lessons/json-and-jq](https://programminghistorian.org/en/lessons/json-and-jq)



```bash
#!/bin/bash

# requires vipgo, jq

visible_site_ids='143,186,368,426,427,443,444,445,658,659,665,766,774,825,864,895,970,1027,1029,1030,1031,1032,1055,1067,1168,1182,1183,1184,1190,1428,1441,1448,1467,1468,1470,1472,1482,1483,1493,1500,1541,1546,1547,1555,1582,1622,1623,1639,1640,1682,1683,1710,1766,1795,1808,1851,1852,1876,1915,1916,1917,1959,2003,2064,2088,2108,2110,2145,2146,2147,2172,2177,2205,2206,2220,2221,2222,2277,2280,2319,2321,2368,2369,2372,2398,2399,2400,2428,2446,2466,2521,2522,2523,2524,2563,2568,2569,2572,2577,2604,2622,2623,2624,2636,2643,2644,2645,2646,2649,2651,2655,2660,2661,2669,2670,2711,2721,2726,2731,2733,2737,2777,2778,2838,2839,2855,2884,2885,2900,2916,2930,3082,3142,3174,3191,3202,3214,3218,3224,3225,3226,3229,3231,3238,3281,3282,3283,3306,3356,3358,3361,3362,3381,3400,3401,3446,3448,3459,3463,3464'

vipgo api GET "/sites?pagesize=550&visible_site_ids=${visible_site_ids}" | \
jq -cr ".data[] | [
  .client_site_id,
  .client_name,
  .environment_name,
  .domain_name,
  .source_repo,
  .source_repo_branch
] | @csv"
```

